<!-- ... (rest of your HTML above) ... -->

<!-- Spinner overlay (add this before </body>) -->
<div id="spinner-overlay" style="display:none;" class="fixed inset-0 z-50 flex items-center justify-center bg-black/20">
  <div class="flex flex-col items-center">
    <div class="animate-spin rounded-full border-4 border-t-4 border-gray-200 border-t-[var(--primary-color)] h-16 w-16 mb-4"></div>
    <span class="text-lg font-semibold text-gray-700 bg-white/90 px-4 py-2 rounded-full shadow">Loadingâ€¦</span>
  </div>
</div>

<script>
// ... (rest of your JS above)

// Add these helper functions:
function showSpinner() {
    document.getElementById('spinner-overlay').style.display = 'flex';
}
function hideSpinner() {
    document.getElementById('spinner-overlay').style.display = 'none';
}

// In fetchWeatherForLocation, show the spinner at the start, hide it before returning or after updating UI:
async function fetchWeatherForLocation(loc) {
    showSpinner();
    const lat = loc.lat;
    const lng = loc.lng;
    try {
        // ... (existing fetch logic)
        // All your weather fetching code here
        // ...
        updateCurrentConditions(loc, temp, desc, feelsLike, humidity, wind, icon);
        updateForecast(forecastPeriods);
        updateAlerts(alertsData);
    } catch (err) {
        alert('Weather data could not be loaded for this location.');
        console.error(err);
    } finally {
        hideSpinner();
    }
}

// Also call showSpinner/hideSpinner in your "Use Location" handler if needed, e.g. before/after weather fetch
// ... (rest of your JS below)
</script>
</body>
</html>
